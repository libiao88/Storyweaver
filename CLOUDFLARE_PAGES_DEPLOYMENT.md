# StoryWeaver AI - Cloudflare Pages éƒ¨ç½²æŒ‡å—

## ğŸ¯ éƒ¨ç½²æ–¹æ¡ˆï¼šCloudflare Pages

**é€‰æ‹©ç†ç”±ï¼š**
- âœ… å›½å†…è®¿é—®å‹å¥½ï¼ˆåŒ—äº¬ã€ä¸Šæµ·èŠ‚ç‚¹ï¼‰
- âœ… æ°¸ä¹…å…è´¹ï¼Œæ— é™å¸¦å®½
- âœ… è‡ªåŠ¨éƒ¨ç½²ï¼Œå¼€å‘ä½“éªŒå¥½
- âœ… å…¨çƒCDNåŠ é€Ÿ

---

## ğŸ“‹ éƒ¨ç½²æ–¹å¼é€‰æ‹©

Cloudflare Pages æä¾› **2ç§éƒ¨ç½²æ–¹å¼**ï¼š

### æ–¹å¼ä¸€ï¼šGité›†æˆè‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨è â­â­â­â­â­ï¼‰
**ä¼˜åŠ¿ï¼š** æäº¤ä»£ç è‡ªåŠ¨éƒ¨ç½²ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
**é€‚åˆï¼š** é•¿æœŸç»´æŠ¤çš„é¡¹ç›®

### æ–¹å¼äºŒï¼šç›´æ¥ä¸Šä¼ ï¼ˆå¿«é€Ÿ â­â­â­â­ï¼‰
**ä¼˜åŠ¿ï¼š** æ— éœ€Gité…ç½®ï¼Œæ‹–æ‹½å³å¯éƒ¨ç½²
**é€‚åˆï¼š** å¿«é€ŸéªŒè¯æˆ–ä¸´æ—¶éƒ¨ç½²

---

## ğŸš€ æ–¹å¼ä¸€ï¼šGité›†æˆè‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

### æ­¥éª¤ 1ï¼šå‡†å¤‡ GitHub ä»“åº“

å¦‚æœæ‚¨çš„ä»£ç è¿˜æ²¡æ¨é€åˆ° GitHubï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
git init
git add .
git commit -m "Initial commit for Cloudflare Pages"

# åˆ›å»º GitHub ä»“åº“å¹¶æ¨é€
# è®¿é—® https://github.com/new åˆ›å»ºæ–°ä»“åº“
git remote add origin https://github.com/YOUR_USERNAME/storyweaver-ai.git
git branch -M main
git push -u origin main
```

**å¦‚æœå·²æœ‰ GitHub ä»“åº“**ï¼Œç¡®ä¿ä»£ç å·²æ¨é€ï¼š

```bash
git push origin main
```

### æ­¥éª¤ 2ï¼šç™»å½• Cloudflare

1. è®¿é—® https://dash.cloudflare.com
2. å¦‚æœæ²¡æœ‰è´¦å·ï¼Œç‚¹å‡» **"Sign up"** æ³¨å†Œï¼ˆå…è´¹ï¼‰
3. ç™»å½•åè¿›å…¥ Dashboard

### æ­¥éª¤ 3ï¼šåˆ›å»º Pages é¡¹ç›®

1. åœ¨å·¦ä¾§èœå•ç‚¹å‡» **"Pages"**
2. ç‚¹å‡» **"Create a project"** æŒ‰é’®
3. é€‰æ‹© **"Connect to Git"**

### æ­¥éª¤ 4ï¼šè¿æ¥ GitHub

1. ç‚¹å‡» **"Connect GitHub"**
2. æˆæƒ Cloudflare è®¿é—®æ‚¨çš„ GitHub è´¦å·
3. é€‰æ‹© **storyweaver-ai** ä»“åº“
4. ç‚¹å‡» **"Begin setup"**

### æ­¥éª¤ 5ï¼šé…ç½®æ„å»ºè®¾ç½®

å¡«å†™ä»¥ä¸‹é…ç½®ï¼š

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **Project name** | `storyweaver-ai` | é¡¹ç›®åç§° |
| **Production branch** | `main` | ç”Ÿäº§ç¯å¢ƒåˆ†æ”¯ |
| **Framework preset** | `None` | é€‰æ‹© None æˆ– Vite |
| **Build command** | `npm run build` | æ„å»ºå‘½ä»¤ |
| **Build output directory** | `dist` | æ„å»ºè¾“å‡ºç›®å½• |

**Root directory** (å¯é€‰)ï¼šç•™ç©ºï¼ˆä½¿ç”¨æ ¹ç›®å½•ï¼‰

### æ­¥éª¤ 6ï¼šæ·»åŠ ç¯å¢ƒå˜é‡ï¼ˆé‡è¦ï¼ï¼‰

ç‚¹å‡» **"Environment variables"** éƒ¨åˆ†ï¼š

æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

```
VITE_SUPABASE_URL=https://dqmwpihbwggsjwmpktmo.supabase.co
VITE_SUPABASE_ANON_KEY=æ‚¨çš„SupabaseåŒ¿åå¯†é’¥
```

**æ³¨æ„ï¼š** å°† `æ‚¨çš„SupabaseåŒ¿åå¯†é’¥` æ›¿æ¢ä¸ºå®é™…çš„å¯†é’¥

è·å–æ–¹å¼ï¼š
1. è®¿é—® https://supabase.com/dashboard/project/dqmwpihbwggsjwmpktmo
2. Settings â†’ API â†’ Project API keys
3. å¤åˆ¶ `anon` public çš„å¯†é’¥

### æ­¥éª¤ 7ï¼šä¿å­˜å¹¶éƒ¨ç½²

1. ç‚¹å‡» **"Save and Deploy"** æŒ‰é’®
2. ç­‰å¾…æ„å»ºå’Œéƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 1-2 åˆ†é’Ÿï¼‰
3. éƒ¨ç½²æˆåŠŸåï¼Œä¼šæ˜¾ç¤ºè®¿é—®é“¾æ¥

### æ­¥éª¤ 8ï¼šéªŒè¯éƒ¨ç½²

è®¿é—®æ˜¾ç¤ºçš„é“¾æ¥ï¼ˆé€šå¸¸æ˜¯ `https://storyweaver-ai.pages.dev`ï¼‰ï¼š

1. ç¡®è®¤é¡µé¢æ­£å¸¸åŠ è½½
2. æµ‹è¯•æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
3. æµ‹è¯• Supabase è¿æ¥

---

## ğŸš€ æ–¹å¼äºŒï¼šç›´æ¥ä¸Šä¼ éƒ¨ç½²ï¼ˆå¿«é€Ÿï¼‰

### æ­¥éª¤ 1ï¼šæ„å»ºé¡¹ç›®

```bash
cd /Users/cobbli/Desktop/storyweaver
npm run build
```

### æ­¥éª¤ 2ï¼šç™»å½• Cloudflare Dashboard

1. è®¿é—® https://dash.cloudflare.com
2. ç™»å½•è´¦å·

### æ­¥éª¤ 3ï¼šåˆ›å»º Pages é¡¹ç›®

1. å·¦ä¾§èœå•ç‚¹å‡» **"Pages"**
2. ç‚¹å‡» **"Create a project"**
3. é€‰æ‹© **"Upload assets"**

### æ­¥éª¤ 4ï¼šä¸Šä¼ æ„å»ºæ–‡ä»¶

1. æ‹–æ”¾ `dist` æ–‡ä»¶å¤¹åˆ°ä¸Šä¼ åŒºåŸŸ
2. æˆ–è€…ç‚¹å‡»ä¸Šä¼ æŒ‰é’®é€‰æ‹© `dist` æ–‡ä»¶å¤¹
3. Project name å¡«å†™ï¼š`storyweaver-ai`
4. ç‚¹å‡» **"Deploy site"**

### æ­¥éª¤ 5ï¼šé…ç½®ç¯å¢ƒå˜é‡

**æ³¨æ„ï¼š** ç›´æ¥ä¸Šä¼ æ–¹å¼éœ€è¦é€šè¿‡ Cloudflare Workers æˆ–å‰ç«¯ä»£ç å¤„ç†ç¯å¢ƒå˜é‡

**æ¨èåšæ³•ï¼š**
1. åœ¨éƒ¨ç½²å‰ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„å€¼ä¸ºç”Ÿäº§å€¼
2. é‡æ–°æ„å»ºé¡¹ç›®
3. é‡æ–°ä¸Šä¼ 

---

## âš™ï¸ è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

### æ·»åŠ è‡ªå®šä¹‰åŸŸå

1. åœ¨ Pages é¡¹ç›®é¡µé¢ï¼Œç‚¹å‡» **"Custom domains"**
2. ç‚¹å‡» **"Set up a custom domain"**
3. è¾“å…¥æ‚¨çš„åŸŸåï¼Œä¾‹å¦‚ï¼š`storyweaver.yourdomain.com`
4. æŒ‰ç…§æç¤ºæ·»åŠ  DNS è®°å½•
5. ç­‰å¾… DNS ç”Ÿæ•ˆï¼ˆé€šå¸¸å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼‰

**å›½å†…è®¿é—®ä¼˜åŒ–ï¼š**
- ä½¿ç”¨ Cloudflare çš„å›½å†…åˆä½œä¼™ä¼´ï¼ˆå¦‚ç™¾åº¦äº‘åŠ é€Ÿï¼‰
- æˆ–è€…ä½¿ç”¨æ”¯æŒå›½å†…çš„ DNS æœåŠ¡

---

## ğŸ”§ é«˜çº§é…ç½®

### 1. é…ç½®è·¯ç”±ï¼ˆå•é¡µåº”ç”¨ï¼‰

ç”±äº StoryWeaver æ˜¯å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ï¼Œéœ€è¦é…ç½®è·¯ç”±é‡å†™ã€‚

åˆ›å»º `_routes.json` æ–‡ä»¶åœ¨ `dist` ç›®å½•ï¼š

```json
{
  "version": 1,
  "include": ["/*"],
  "exclude": ["/assets/*"]
}
```

æˆ–è€…åœ¨ `wrangler.toml` ä¸­é…ç½®ï¼ˆå·²åˆ›å»ºï¼‰ï¼š

```toml
[[redirects]]
from = "/*"
to = "/index.html"
status = 200
```

### 2. é…ç½®ç¼“å­˜ç­–ç•¥

åœ¨ Cloudflare Dashboardï¼š
1. é€‰æ‹©æ‚¨çš„åŸŸå
2. ç‚¹å‡» **"Caching"** â†’ **"Configuration"**
3. é…ç½®æµè§ˆå™¨ç¼“å­˜å’Œè¾¹ç¼˜ç¼“å­˜

### 3. é…ç½® HTTPS

Cloudflare Pages **è‡ªåŠ¨æä¾› HTTPS**ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

---

## ğŸ“ éƒ¨ç½²åæ£€æŸ¥æ¸…å•

- [ ] é¡µé¢æ­£å¸¸åŠ è½½ï¼ˆæ— ç™½å±ï¼‰
- [ ] æ‰€æœ‰é™æ€èµ„æºåŠ è½½æˆåŠŸï¼ˆCSSã€JSã€å›¾ç‰‡ï¼‰
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] Supabase è¿æ¥æ­£å¸¸
- [ ] æ—  JavaScript é”™è¯¯
- [ ] ç§»åŠ¨ç«¯è®¿é—®æ­£å¸¸
- [ ] é¡µé¢åŠ è½½é€Ÿåº¦ < 3ç§’

---

## ğŸ”„ åç»­æ›´æ–°éƒ¨ç½²

### å¦‚æœä½¿ç”¨ Git é›†æˆï¼š

```bash
# ä¿®æ”¹ä»£ç å
git add .
git commit -m "æ›´æ–°åŠŸèƒ½"
git push origin main

# Cloudflare ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²
```

### å¦‚æœä½¿ç”¨ç›´æ¥ä¸Šä¼ ï¼š

```bash
# 1. é‡æ–°æ„å»º
npm run build

# 2. åœ¨ Cloudflare Dashboard é‡æ–°ä¸Šä¼  dist æ–‡ä»¶å¤¹
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šæ„å»ºå¤±è´¥

**ç—‡çŠ¶ï¼š** Deploy log æ˜¾ç¤ºæ„å»ºé”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ `package.json` ä¸­çš„ `build` è„šæœ¬
2. ç¡®ä¿ `dist` ç›®å½•ç”ŸæˆæˆåŠŸ
3. æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆå»ºè®®ä½¿ç”¨ 18+ï¼‰

### é—®é¢˜ 2ï¼šé¡µé¢ç©ºç™½

**ç—‡çŠ¶ï¼š** éƒ¨ç½²æˆåŠŸä½†é¡µé¢ç©ºç™½

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ `dist/index.html` æ˜¯å¦å­˜åœ¨
2. æ£€æŸ¥èµ„æºè·¯å¾„æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 3ï¼šç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ

**ç—‡çŠ¶ï¼š** Supabase è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ç¯å¢ƒå˜é‡åç§°æ˜¯å¦æ­£ç¡®
2. ç¡®ä¿ç¯å¢ƒå˜é‡å€¼æ²¡æœ‰å¼•å·
3. é‡æ–°éƒ¨ç½²ï¼ˆç¯å¢ƒå˜é‡æ›´æ”¹éœ€è¦é‡æ–°éƒ¨ç½²ï¼‰

### é—®é¢˜ 4ï¼šè·¯ç”± 404

**ç—‡çŠ¶ï¼š** åˆ·æ–°é¡µé¢å‡ºç° 404

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®ä¿å·²é…ç½® SPA è·¯ç”±é‡å†™
2. æ£€æŸ¥ `_routes.json` æˆ– `wrangler.toml` é…ç½®

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å¯ç”¨ Brotli å‹ç¼©

Cloudflare é»˜è®¤å¯ç”¨ Gzip å’Œ Brotli å‹ç¼©ï¼Œæ— éœ€é…ç½®ã€‚

### 2. ä¼˜åŒ–å›¾ç‰‡

- ä½¿ç”¨ WebP æ ¼å¼
- å‹ç¼©å›¾ç‰‡å¤§å°
- ä½¿ç”¨å“åº”å¼å›¾ç‰‡

### 3. ä»£ç åˆ†å‰²

Vite è‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ï¼Œç¡®ä¿æ‡’åŠ è½½ç»„ä»¶ã€‚

### 4. ä½¿ç”¨ Cloudflare Analytics

1. åœ¨ Dashboard ä¸­æŸ¥çœ‹ **Analytics**
2. ç›‘æ§è®¿é—®é‡ã€æ€§èƒ½ã€é”™è¯¯ç‡

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **Cloudflare æ–‡æ¡£**ï¼šhttps://developers.cloudflare.com/pages
2. **ç¤¾åŒºè®ºå›**ï¼šhttps://community.cloudflare.com
3. **Discord**ï¼šhttps://discord.gg/cloudflaredev

---

## âœ… éƒ¨ç½²æˆåŠŸæ ‡å¿—

å½“æ‚¨çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯æ—¶ï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸï¼š

```
ğŸ‰ StoryWeaver AI å·²æˆåŠŸéƒ¨ç½²åˆ° Cloudflare Pagesï¼

ğŸ”— è®¿é—®åœ°å€ï¼š
  https://storyweaver-ai.pages.dev

âœ… é¡µé¢åŠ è½½æ­£å¸¸
âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
âœ… å›½å†…è®¿é—®é€Ÿåº¦å¿«
```

---

## ğŸ‰ æ­å–œï¼

æ‚¨çš„ StoryWeaver AI å·²æˆåŠŸéƒ¨ç½²åˆ° Cloudflare Pagesï¼

**ä¸‹ä¸€æ­¥ï¼š**
- é…ç½® Supabase æ•°æ®åº“ï¼ˆå¦‚æœè¿˜æ²¡å®Œæˆï¼‰
- æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- åˆ†äº«ç»™å›¢é˜Ÿæˆ–ç”¨æˆ·

**éƒ¨ç½²å®Œæˆåï¼Œè¯·è¿è¡ŒéªŒè¯è„šæœ¬ï¼š**

```bash
./validate-deployment.sh
```

**æˆ–è€…æ‰‹åŠ¨éªŒè¯ï¼š**
1. è®¿é—® https://storyweaver-ai.pages.dev
2. æµ‹è¯•æ–‡ä»¶ä¸Šä¼ 
3. éªŒè¯ LLM åŠŸèƒ½
4. æ£€æŸ¥ Supabase è¿æ¥

---

**ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹éƒ¨ç½²äº†ï¼æœ‰é—®é¢˜éšæ—¶é—®æˆ‘ï¼** ğŸš€
